<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"
	charset="ISO-8859-1">

<div class="breadcrumb-holder">
	<div class="container-fluid">
		<ul class="breadcrumb">
			<li class="breadcrumb-item"><a href="/">Inicio</a></li>
			<li class="breadcrumb-item">Logs</li>
		</ul>
	</div>
</div>

<section>
	<div class="container-fluid">
		<header>
			<h1 class="h3 display">Información de movimientos del usuarios</h1>
		</header>
				<div class="row">
			<div class="col-lg-12">
				<div class="card">
					<div class="card header">
						<div class="row">
							<div class="input-group col-sm-4">
								<div class="input-group-prepend">
									<div class="input-group-text">
										<i class="fas fa-search"></i>
									</div>
								</div>
								<input type="search" placeholder="Buscar..."
									data-ng-model="lCtrl.filterLog" data-ng-change="lCtrl.filterSearch()" class="form-control">
							</div>
						</div>
					</div>
					<div class="card-body">
						<div class="table-responsive">
							<table class="table table-striped">
								<thead>
									<tr>
										<th>#</th>
										<th>Fecha</th>
										<th>User</th>
										<th>Entidad</th>
										<th>Movimiento</th>
										<th>Datos</th>
									</tr>
								</thead>
								<tbody>
									<tr
										data-ng-repeat="lo in lCtrl.filteredLogs track by $index">
										<td>{{$index+1}}</td>
										<td>{{lo.date | date: 'dd/MM/yyyy HH:mm'}}</td>
										<td>{{lo.user}}</td>
										<td>{{lo.entity}}</td>
										<td>{{lCtrl.findKeyword(lo.method)}}</td>
										<td><button data-ng-if="lo.data" type="button" class="btn btn-info" data-ng-click="lCtrl.setDataShow(lo)"
											data-toggle="modal" data-target="#modal-show-data">Ver</button></td>
									</tr>
								</tbody>
							</table>
							<div data-ng-show="!lCtrl.logsLength.length && lCtrl.filterLog">
								<p class="text-muted text-center"><i class="fas fa-search fa-3x"></i></p>
								<p class="text-muted text-center">No se encontró información los datos ingresados</p>
							</div>
							<div data-pagination="" data-num-pages="lCtrl.numPages()"
								data-current-page="lCtrl.currentPage" data-max-size="lCtrl.maxSize"
								data-boundary-links="true"></div>
							<select data-ng-model="lCtrl.viewby" class="form-control"
									data-ng-change="lCtrl.setItemsPerPage(lCtrl.viewby)">
										<option>3</option>
										<option>5</option>
										<option>10</option>
										<option>20</option>
										<option>30</option>
										<option>40</option>
										<option>50</option>
									</select>
								<pager uib-pagination total-items="lCtrl.logs.length"
									data-ng-model="lCtrl.currentPage"
									items-per-page="lCtrl.itemsPerPage"
									num-pages="lCtrl.numPages"
									max-size="lCtrl.maxSize" class="pagination-sm"
									boundary-link-numbers="true" rotate="false"
									boundary-links="true"></pager>
								<pre>Page: {{lCtrl.currentPage}} / {{lCtrl.numPages}}</pre>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>
<div class="modal fade bd-example-modal-lg" id="modal-show-data" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">{{lCtrl.log.date | date: 'dd/MM/yyyy'}} / {{lCtrl.log.user}} / {{lCtrl.log.entity}} / {{lCtrl.log.method}}</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
      	<div class="row" data-ng-repeat="dta in lCtrl.log.data track by $index">
			{{dta}}
      	</div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
      </div>
      
    </div>
  </div>
</div>


